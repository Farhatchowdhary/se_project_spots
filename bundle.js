(()=>{"use strict";const e=(e,t,o)=>{const r=e.some(e=>!e.validity.valid);t.disabled=r,t.classList.toggle(o.inactiveButtonClass,r)},t={formSelector:".formlogin, .formLogin",inputSelector:".modal__label",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__label_type_error",errorClass:"form__error_visible"};var o;o=t,Array.from(document.querySelectorAll(o.formSelector)).forEach(t=>{t.addEventListener("submit",e=>e.preventDefault()),((t,o)=>{const r=Array.from(t.querySelectorAll(o.inputSelector)),n=t.querySelector(o.submitButtonSelector);e(r,n,o),r.forEach(l=>l.addEventListener("input",()=>{((e,t,o)=>{const r=e.querySelector(`#${t.id}-error`);t.validity.valid?(t.classList.remove(o.inputErrorClass),r.textContent="",r.classList.remove(o.errorClass)):(t.classList.add(o.inputErrorClass),r.textContent=t.validationMessage,r.classList.add(o.errorClass))})(t,l,o),e(r,n,o)}))})(t,o)});const r=document.querySelector("#card-template").content.querySelector(".card"),n=document.querySelector(".cards__list"),l=document.getElementById("imagePreviewModal"),a=l.querySelector(".modal__image"),c=l.querySelector(".modal__caption");function s(e){const t=r.cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name,n.addEventListener("click",()=>{a&&c&&l&&(a.src=e.link,a.alt=e.name,c.textContent=e.name,q(l))});const s=t.querySelector(".card__like-button");s.addEventListener("click",()=>{s.classList.toggle("card__like-button_active")});const i=t.querySelector(".card__delete-button");return i&&i.addEventListener("click",()=>{t.remove()}),t}l.querySelector(".modal__close-button").addEventListener("click",()=>L(l)),[{name:"Val Thorens",link:"./images/val-thorens.jpg",alt:"picture of a hut"},{name:"Restaurant Terrace",link:"./images/restaurant.jpg",alt:"picture of a restaurant"},{name:"An outdoor cafe",link:"./images/an-outdoor-cafe.jpg",alt:"picture of outdoor cafe"},{name:"A very long bridge over the forest",link:"./images/a-very-long-bridge.jpg",alt:"picture of long bridge"},{name:"Tunnel with morning light",link:"./images/tunnel.jpg",alt:"picture of a tunnel"},{name:"Mountain house",link:"./images/mountain.jpg",alt:"picture of a mountain"}].forEach(function(e){const t=s(e);n.append(t)});const i=document.querySelector(".profile__title"),u=document.querySelector(".profile__subtitle"),d=document.querySelector("#editModal"),m=d.querySelector("#title"),v=d.querySelector("#subtitle"),_=document.querySelector(".profile__edit-button"),y=(d.querySelector(".modal__close-button"),d.querySelector("form")),p=(e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);o.forEach(o=>{const r=e.querySelector(`#${o.id}-error`);o.classList.remove(t.inputErrorClass),r.textContent="",r.classList.remove(t.errorClass)}),function(e,t){const o=e.some(e=>!e.validity.valid);t.disabled=o,t.classList.toggle("modal__save-button_disabled",o)}(o,r)};_.addEventListener("click",()=>{m.value=i.textContent,v.value=u.textContent,p(y,t),q(d)}),d.addEventListener("submit",e=>{e.preventDefault(),i.textContent=y.title.value,u.textContent=y.subtitle.value,L(d),p(y,t)});const S=document.querySelector(".profile__post-button"),f=document.querySelector("#postModal"),g=f.querySelector("form");S.addEventListener("click",()=>{p(g,t),q(f)}),g.addEventListener("submit",e=>{e.preventDefault();const o=s({name:g.caption.value,link:g.image.value});n.prepend(o),L(f),g.reset(),p(g,t)});const b=e=>{if("Escape"===e.key){const e=document.querySelector(".modalisopened");e&&L(e)}};function q(e){e.classList.add("modalisopened"),document.addEventListener("keydown",b)}function L(e){e.classList.remove("modalisopened"),document.removeEventListener("keydown",b)}document.querySelectorAll(".modal").forEach(e=>{const t=e.querySelector(".modal__close-button, .modal__close-btn");t&&t.addEventListener("click",()=>L(e)),e.addEventListener("mousedown",t=>{t.target===e&&L(e)})})})();